containers:
  default:
    docker: golang:1.10
    workdir: /go/src/github.com/Shopify/themekit

steps:
- label: Run tests and vet
  timeout: 3m
  run:
  - go vet -all ./...
  - go test -timeout 15s -race -coverprofile=coverage.txt -covermode=atomic $(go list ./...)
  - bash -c "bash <(curl -s https://codecov.io/bash)"
